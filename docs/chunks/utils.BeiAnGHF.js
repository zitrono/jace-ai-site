function d(){const e=localStorage.getItem("cookieConsent"),t=document.getElementById("cookie-banner");if(e||!t)return;const o=e=>{try{if(localStorage.setItem("cookieConsent",e),requestAnimationFrame((()=>{t.style.opacity="0",t.style.transform="translateY(100vh)",setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),300)})),"CustomEvent"in window){const t=new CustomEvent("cookieConsentChanged",{detail:{consent:e}});document.dispatchEvent(t)}}catch{}},n=e=>{const t=e.target;if(t.matches("button"))switch(t.id){case"cookie-accept":o("accepted");break;case"cookie-reject":o("rejected");break;case"cookie-settings":o("settings")}};t.addEventListener("click",n,{passive:!0}),t.addEventListener("keydown",(e=>{"Escape"===e.key&&o("rejected")}),{passive:!1}),"requestIdleCallback"in window?requestIdleCallback((()=>{setTimeout((()=>{localStorage.getItem("cookieConsent")||requestAnimationFrame((()=>{t.style.opacity="1",t.style.transform="translateY(0)"}))}),1e3)})):setTimeout((()=>{localStorage.getItem("cookieConsent")||(t.style.opacity="1",t.style.transform="translateY(0)")}),1e3),window.addEventListener("beforeunload",(()=>{t.removeEventListener("click",n)}))}function l(){window.showLoginModal=function(){const e=document.getElementById("login-modal");e&&requestAnimationFrame((()=>{e.classList.remove("hidden"),e.style.opacity="0",e.offsetHeight,e.style.opacity="1";const t=e.querySelector("button:not([disabled])");t&&t.focus();const o=document.activeElement;e.setAttribute("data-previous-focus",o?o.id||o.tagName:""),document.body.style.overflow="hidden"}))},window.closeLoginModal=function(){const e=document.getElementById("login-modal");e&&(e.style.opacity="0",setTimeout((()=>{e.classList.add("hidden"),e.style.opacity="",document.body.style.overflow="";const t=e.getAttribute("data-previous-focus");if(t){const e=document.getElementById(t)||document.querySelector(t.toLowerCase());e&&e.focus&&e.focus()}}),150))};const e=function(e){const t=document.getElementById("login-modal");if(t&&!t.classList.contains("hidden")){if("Escape"===e.key)return e.preventDefault(),void window.closeLoginModal();if("Tab"===e.key){const o=t.querySelectorAll('button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled])');if(0===o.length)return;const n=o[0],s=o[o.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),s.focus()):!e.shiftKey&&document.activeElement===s&&(e.preventDefault(),n.focus())}}};document.addEventListener("keydown",e,{passive:!1}),window.addEventListener("beforeunload",(()=>{document.removeEventListener("keydown",e)}))}d(),l();