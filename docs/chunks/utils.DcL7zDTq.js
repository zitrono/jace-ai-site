class i{elements;isSubmitting=!1;constructor(e){this.elements=e,this.setupEventListeners(),this.injectStyles()}injectStyles(){if(!document.getElementById("auth-form-styles")){const e=document.createElement("style");e.id="auth-form-styles",e.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        .animate-shake {
          animation: shake 0.5s;
        }
      `,document.head.appendChild(e)}}setupEventListeners(){this.elements.togglePasswordBtn?.addEventListener("click",()=>{this.togglePasswordVisibility()}),[this.elements.usernameInput,this.elements.passwordInput].forEach(e=>{e?.addEventListener("input",()=>{this.hideError()})}),this.elements.form?.addEventListener("submit",async e=>{e.preventDefault(),await this.handleSubmit()})}togglePasswordVisibility(){const e=this.elements.passwordInput.type==="password";this.elements.passwordInput.type=e?"text":"password",this.elements.eyeIcon.innerHTML=e?'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"/>':'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>'}showError(e){this.elements.errorText.textContent=e,this.elements.errorMessage.classList.remove("hidden")}hideError(){this.elements.errorMessage.classList.contains("hidden")||this.elements.errorMessage.classList.add("hidden")}setLoadingState(e){this.isSubmitting=e,e?(this.elements.loginButton.disabled=!0,this.elements.loginButtonText.classList.add("opacity-0"),this.elements.loginSpinner.classList.remove("hidden")):(this.elements.loginButton.disabled=!1,this.elements.loginButtonText.classList.remove("opacity-0"),this.elements.loginSpinner.classList.add("hidden"))}async handleSubmit(){if(this.isSubmitting)return;const e=this.elements.usernameInput.value.trim(),n=this.elements.passwordInput.value;if(!e||!n){this.showError("Please enter both username and password.");return}this.setLoadingState(!0);try{const t=Math.random()*1e3+1500;throw await new Promise(o=>setTimeout(o,t)),new Error("Invalid username or password. Please check your credentials and try again.")}catch(t){this.showError(t.message||"Invalid username or password. Please try again."),this.setLoadingState(!1),this.elements.loginButton.classList.add("animate-shake"),setTimeout(()=>{this.elements.loginButton.classList.remove("animate-shake")},500)}}reset(){this.elements.form.reset(),this.hideError(),this.setLoadingState(!1)}focus(){this.elements.usernameInput?.focus()}}document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("loginModal"),e=document.getElementById("loginBackdrop"),n=document.getElementById("closeLoginModal"),t=new i({form:document.getElementById("modalLoginForm"),usernameInput:document.getElementById("modalUsername"),passwordInput:document.getElementById("modalPassword"),togglePasswordBtn:document.getElementById("modalTogglePassword"),eyeIcon:document.getElementById("modalEyeIcon"),errorMessage:document.getElementById("modalErrorMessage"),errorText:document.getElementById("modalErrorText"),loginButton:document.getElementById("modalLoginButton"),loginButtonText:document.getElementById("modalLoginButtonText"),loginSpinner:document.getElementById("modalLoginSpinner"),rememberMeCheckbox:document.getElementById("modalRememberMe")});window.openLoginModal=()=>{s?.classList.remove("hidden"),document.body.style.overflow="hidden",setTimeout(()=>t.focus(),100)},window.closeLoginModal=()=>{s?.classList.add("hidden"),document.body.style.overflow="",t.reset()},window.showLoginModal=window.openLoginModal,n?.addEventListener("click",window.closeLoginModal),e?.addEventListener("click",window.closeLoginModal),document.addEventListener("keydown",o=>{o.key==="Escape"&&!s?.classList.contains("hidden")&&window.closeLoginModal()})});export{i as A};
