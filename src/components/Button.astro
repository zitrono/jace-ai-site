---
interface Props {
  variant: 'primary' | 'secondary';
  size?: 'sm' | 'md' | 'lg';
  class?: string;
  onclick?: string;
  id?: string;
  'data-test'?: string;
  href?: string;
  type?: 'button' | 'submit' | 'reset';
}

const { 
  variant, 
  size = 'md', 
  class: className = '',
  onclick,
  id,
  'data-test': dataTest,
  href,
  type = 'button',
  ...rest 
} = Astro.props;

// Size classes that match POM expectations
const sizeClasses = {
  sm: 'btn-sm',
  md: '',
  lg: 'btn-lg'
};

// Combine classes to match POM selectors
const classes = [
  variant === 'primary' ? 'btn-primary' : 'btn-secondary',
  sizeClasses[size],
  className
].filter(Boolean).join(' ');
---

{href ? (
  <a 
    href={href}
    class={classes}
    id={id}
    data-test={dataTest}
    {...rest}
  >
    <slot />
  </a>
) : (
  <button 
    type={type}
    class={classes}
    onclick={onclick}
    id={id}
    data-test={dataTest}
    {...rest}
  >
    <slot />
  </button>
)}

<style>
  /* Base button styles */
  .btn-primary,
  .btn-secondary {
    font-weight: 500;
    transition: all 0.2s;
    border: 1px solid rgba(255, 255, 255, 0.02);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-decoration: none;
    white-space: nowrap;
  }
  
  /* POM-validated primary button styles */
  .btn-primary {
    background-color: var(--pom-accent);
    color: var(--pom-accent-text);
    padding: var(--pom-btn-padding);
    height: var(--pom-btn-height);
    line-height: normal;
    border-radius: var(--pom-btn-radius);
  }
  
  .btn-primary:hover {
    background-color: rgb(255, 230, 120);
  }
  
  .btn-primary:active {
    transform: scale(0.99);
  }
  
  /* POM-validated secondary button styles */
  .btn-secondary {
    background-color: var(--pom-bg-secondary);
    color: var(--pom-text-secondary);
    padding: var(--pom-btn-padding);
    height: var(--pom-btn-height);
    line-height: normal;
    border-radius: var(--pom-btn-radius);
  }
  
  .btn-secondary:hover {
    background-color: rgb(82, 82, 82);
  }
  
  .btn-secondary:active {
    transform: scale(0.99);
  }
  
  /* Size variations */
  .btn-sm {
    height: var(--pom-btn-height-sm);
    padding: 0 16px;
    font-size: 14px;
  }
  
  .btn-lg {
    height: var(--pom-btn-height);
    padding: var(--pom-btn-padding);
    border-radius: var(--pom-btn-radius-lg);
    font-size: 16px;
  }
  
  /* Mobile responsive adjustments */
  @media (max-width: 359px) {
    .btn-sm {
      padding: 0 8px;
      font-size: 12px;
    }
  }
</style>