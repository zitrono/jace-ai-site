---
/**
 * CTA - Call-to-action section component with gradient background
 * @example
 * <CTA 
 *   title="Ready to transform your portfolio intelligence?"
 *   subtitle="See what Ralph can do for your firm."
 *   ctaText="Book a Demo"
 *   ctaHref="/contact"
 * />
 */

import Button from '../primitives/Button.astro';
import Section from '../layout/Section.astro';
import type { BaseComponentProps } from '@/types/components';

export interface Props extends BaseComponentProps {
  /** Title text for the CTA section */
  title?: string;
  /** Subtitle text */
  subtitle?: string;
  /** Text for the CTA button */
  ctaText?: string;
  /** Link for the CTA button */
  ctaHref?: string;
  /** Background style variant */
  background?: 'gradient' | 'solid';
  /** Whether to show the radial gradient pattern */
  showPattern?: boolean;
  /** Layout variant */
  variant?: 'default' | 'compact';
}

const {
  class: className = '',
  title = 'Ready to transform your portfolio intelligence?',
  subtitle = 'See what Ralph can do for your firm.',
  ctaText = 'Book a Demo',
  ctaHref,
  background: _background = 'gradient',
  showPattern = true,
  variant = 'default',
} = Astro.props;
---

<Section class={`py-20 overflow-hidden ${className}`} as="section" background="primary">
  <div class="mx-auto max-w-7xl px-6 lg:px-8 overflow-hidden">
    <div
      class={`mx-auto ${variant === 'compact' ? 'mt-12 max-w-4xl' : 'mt-20 max-w-7xl sm:mt-32'} sm:px-6 lg:px-8 overflow-hidden`}
    >
      <div
        class="relative isolate overflow-hidden px-6 py-20 shadow-2xl sm:rounded-3xl sm:px-24 xl:py-24 bg-gradient-cta-section"
      >
        <h2
          class="mx-auto max-w-xl text-center text-4xl font-semibold tracking-tight text-text-inverted sm:text-5xl"
        >
          {title}
        </h2>
        <p class="mx-auto mt-6 max-w-lg text-center text-xl text-text-inverted">
          {subtitle}
        </p>
        <div class="mt-10 flex justify-center">
          <Button variant="primary" size="lg" href={ctaHref}>
            {ctaText}
          </Button>
        </div>

        <!-- Radial gradient background -->
        {
          showPattern && (
            <svg
              viewBox="0 0 1024 1024"
              aria-hidden="true"
              class="absolute left-1/2 top-1/2 -z-10 size-[64rem] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 pointer-events-none"
            >
              <circle
                r="512"
                cx="512"
                cy="512"
                fill="url(#759c1415-0410-454c-8f7c-9a820de03641)"
                fill-opacity="0.7"
              />
              <defs>
                <radialGradient
                  r="1"
                  cx="0"
                  cy="0"
                  id="759c1415-0410-454c-8f7c-9a820de03641"
                  gradientUnits="userSpaceOnUse"
                  gradientTransform="translate(512 512) rotate(90) scale(512)"
                >
                  <stop stop-color="rgba(139, 92, 246, 0.8)" />
                  <stop offset="1" stop-color="rgba(67, 56, 202, 0.2)" stop-opacity="0" />
                </radialGradient>
              </defs>
            </svg>
          )
        }
      </div>
    </div>
  </div>
</Section>
