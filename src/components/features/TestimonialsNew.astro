---
/**
 * TestimonialsNew - Testimonials section with PE leader quotes
 * @example
 * <TestimonialsNew 
 *   title="Leading PE Firms Are Embracing AI"
 *   subtitle="Industry Leaders on AI Adoption"
 *   columns={3}
 *   testimonials={[
 *     { id: 't1', quote: 'Quote', author: 'Name', title: 'Title', company: 'Company' }
 *   ]}
 * />
 */

import Card from '../primitives/Card.astro';
import Section from '../layout/Section.astro';
import type { BaseComponentProps } from '@/types/components';

interface Testimonial {
  id: string;
  quote: string;
  author: string;
  title: string;
  company: string;
  avatar?: string;
  logo?: string;
}

export interface Props extends BaseComponentProps {
  /** Section title */
  title?: string;
  /** Section subtitle */
  subtitle?: string;
  /** Layout style (currently only grid supported) */
  layout?: 'grid' | 'carousel';
  /** Number of columns in the grid */
  columns?: 1 | 2 | 3;
  /** Whether to show company logos */
  showLogos?: boolean;
  /** Array of testimonial items */
  testimonials?: Testimonial[];
}

const {
  class: className = '',
  title = 'Leading PE Firms Are Embracing AI Transformation',
  subtitle = 'Industry Leaders on AI Adoption',
  layout: _layout = 'grid',
  columns = 3,
  showLogos: _showLogos = true,
  testimonials = [
    {
      id: 'blackstone-first-mover',
      quote:
        'This is a transformational technology. You have to be the first mover in your industry.',
      author: 'Stephen Schwarzman',
      title: 'Chairman, CEO & Co-Founder',
      company: 'Blackstone',
      logo: '/ralph-web/logos/The_Blackstone_Group_logo_(2).svg',
    },
    {
      id: 'vista-ai-transformation',
      quote:
        'We have adopted generative artificial intelligence not just as a tool but as a pivotal component of our value creation and underwriting processes.',
      author: 'Robert F. Smith',
      title: 'Founder, Chairman & CEO',
      company: 'Vista Equity Partners',
      logo: '/ralph-web/logos/Vista-Equity-Partners-Header.webp',
    },
    {
      id: 'eqt-competitive-edge',
      quote:
        'Being creative and embracing new tools such as Artificial intelligence will be vital for investors in an increasingly competitive private equity industry.',
      author: 'Christian Sinding',
      title: 'CEO',
      company: 'EQT',
      logo: '/ralph-web/logos/EQT_(Unternehmen)_logo.svg',
    },
    {
      id: 'kkr-tectonic-shift',
      quote:
        "Artificial intelligence today, it's not a fad. It's really a tectonic shift in terms of general purpose technology evolution, similar to electrification or Internet.",
      author: 'Waldemar Szlezak',
      title: 'Partner & Global Head of Digital Infrastructure',
      company: 'KKR',
      logo: '/ralph-web/logos/Kohlberg_Kravis_Roberts_(logo).svg',
    },
    {
      id: 'apollo-digital-value',
      quote:
        'A greater emphasis on generating value through digital capabilities in portfolio companies was necessary.',
      author: 'David Sambur',
      title: 'Partner & Co-Head of Equity',
      company: 'Apollo Global Management',
      logo: '/ralph-web/logos/Apollo_Global_Management_logo.svg',
    },
    {
      id: 'cvc-opportunity-danger',
      quote:
        'There is a huge opportunity coming our way, but that means there is also real danger for those that are not prepared.',
      author: 'Jean-RÃ©my Roussel',
      title: 'Managing Partner',
      company: 'CVC Capital Partners',
      logo: '/ralph-web/logos/CVC_Capital_Partners_logo.svg',
    },
  ],
} = Astro.props;

const gridClasses = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 sm:grid-cols-2',
  3: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
};
---

<Section
  class={`py-section-lg sm:py-32 ${className}`}
  as="section"
  aria-labelledby="testimonials-title"
  background="primary"
>
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl sm:text-center">
      <h2 class="text-base font-semibold text-primary-yellow">
        {subtitle}
      </h2>
      <p
        id="testimonials-title"
        class="mt-2 text-pretty text-3xl font-semibold tracking-tight text-white sm:text-balance sm:text-5xl"
      >
        {title}
      </p>
    </div>

    <!-- Dynamic Testimonials Grid -->
    <div
      class={`testimonials-grid mx-auto mt-16 grid max-w-7xl gap-8 sm:mt-20 ${gridClasses[columns]}`}
      role="list"
      aria-label="Industry testimonials"
    >
      {
        testimonials.slice(0, columns * 2).map((testimonial) => (
          <Card
            class="group relative p-8 hover:scale-105 transition-all duration-300 bg-gradient-to-b from-neutral-700/50 to-neutral-800/50 border border-neutral-600/30 hover:border-primary-yellow/30"
            hover={false}
            role="listitem"
          >
            {/* Logo positioned at top right */}
            {testimonial.logo && _showLogos && (
              <div class="absolute top-6 right-6 w-20 h-10 flex items-center justify-end">
                <img
                  src={testimonial.logo}
                  alt={`${testimonial.company} logo`}
                  class={`max-w-full max-h-full object-contain opacity-60 group-hover:opacity-80 transition-opacity duration-300 ${
                    testimonial.company === 'Blackstone' ? '' : 'filter brightness-0 invert'
                  }`}
                />
              </div>
            )}

            {/* Quote mark */}
            <div
              class="absolute top-6 left-6 text-4xl text-primary-yellow opacity-50"
              aria-hidden="true"
            >
              "
            </div>

            {/* Quote content with adjusted spacing for logo */}
            <blockquote class="relative mt-12 mb-8">
              <p class="text-lg leading-relaxed text-white font-medium">{testimonial.quote}</p>
            </blockquote>

            {/* Author info */}
            <figcaption class="pt-6 border-t border-neutral-600/50">
              <div class="space-y-1">
                <div class="text-lg font-bold text-primary-yellow">{testimonial.author}</div>
                <div class="text-sm text-text-muted">{testimonial.title}</div>
                <div class="text-sm text-text-muted font-medium">{testimonial.company}</div>
              </div>
            </figcaption>
          </Card>
        ))
      }
    </div>
  </div>
</Section>
